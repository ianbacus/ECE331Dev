/*
 * queue
 *
 *  Created on: Mar 6, 2016
 *      Author: Ian Bacus (ianbacus@gmail.com)
 */

#ifndef __CONSTANTS__
#define __CONSTANTS__
#include <stdint.h> //int definitions
#include <stdbool.h>
#include <stdlib.h> //calloc, free
#include <stdint.h>
#include <sysctl.h>
#include <gpio.h>
#include <ssi.h>
#include <interrupt.h>
#include <hw_types.h>
#include <hw_memmap.h>
#include <hw_ints.h>
#include <pin_map.h>

#define FIFO_SIZE	8
#define FRAME_TYPE	uint16_t
#define FRAME_SIZE	sizeof(FRAME_TYPE)
#define FRAME_BITS	8*FRAME_SIZE
#define DELAY 10000000
#define IDLE_PAD 40

typedef uint8_t engine_t;
typedef enum
{
	Idle,Preamble, LocoA, LocoB, TurnA, TurnB
} TX_state_t;

//Consist control tests: deactivation packets

//addr [0] 0: 0 00000000 0 00010010 0 00000000 0 00010010 1
//addr [1] 2: 0 00000010 0 00010010 0 00000000 0 00010000 1
//addr [2] 3: 0 00000011 0 00010010 0 00000000 0 00010001 1
//addr [3] 4: 0 00000100 0 00010010 0 00000000 0 00010110 1

const char Consist_strings[4][37] =
{
		"0000000000000100100000000000000100101",
		"0000000100000100100000000000000100001",
		"0000000110000100100000000000000100011",
		"0000001000000100100000000000000101101"
};


FRAME_TYPE ConsistPacket[4][7] =
{
	{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},{0,0,0,0,0,0,0}
};
#ifndef ZEROPACKETS
const char Engine_strings[2][16][28] =
{
	{
		"0000000110010000000010000111","0000000110010100110010100001","0000000110010101010010101101","0000000110010101110010101001",
		"0000000110010110010010110101","0000000110010110110010110001","0000000110010111010010111101","0000000110010111110010111001",
		"0000000110010000000010000111","0000000110011100110011100001","0000000110011101010011101101","0000000110011101110011101001",
		"0000000110011110010011110101","0000000110011110110011110001","0000000110011111010011111101","0000000110011111110011111001",
	},
	{
		"0000000100010000000010000101","0000000100010100110010100011","0000000100010101010010101111","0000000100010101110010101011",
		"0000000100010110010010110111","0000000100010110110010110011","0000000100010111010010111111","0000000100010111110010111011",
		"0000000100010000000010000101","0000000100011100110011100011","0000000100011101010011101111","0000000100011101110011101011",
		"0000000100011110010011110111","0000000100011110110011110011","0000000100011111010011111111","0000000100011111110011111011",
	},
};

#else
//Broadcast address
const char Engine_strings[2][16][28] =
{
	{
		"0000000000010000000010000001","0000000000010100110010100111","0000000000010101010010101011","0000000000010101110010101111",
		"0000000000010110010010110011","0000000000010110110010110111","0000000000010111010010111011","0000000000010111110010111111",
		"0000000000010000000010000001","0000000000011100110011100111","0000000000011101010011101011","0000000000011101110011101111",
		"0000000000011110010011110011","0000000000011110110011110111","0000000000011111010011111011","0000000000011111110011111111",
	},
	{
		"0000000000010000000010000001","0000000000010100110010100111","0000000000010101010010101011","0000000000010101110010101111",
		"0000000000010110010010110011","0000000000010110110010110111","0000000000010111010010111011","0000000000010111110010111111",
		"0000000000010000000010000001","0000000000011100110011100111","0000000000011101010011101011","0000000000011101110011101111",
		"0000000000011110010011110011","0000000000011110110011110111","0000000000011111010011111011","0000000000011111110011111111",
	},
};
#endif


FRAME_TYPE Engine[2][16][7] =
{
	{
		{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},
		{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},
		{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},
		{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},
	},
	{
		{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},
		{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},
		{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},
		{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},
	}
};

const char Turnout_strings[2][2][28] =
{
	{"0000010010100001000100011011","0000010010100000000100010011"},{"0000010010100001010100011001","0000010010100001110100011101"}
};
FRAME_TYPE Turnout[2][2][7] =
{
	{{0,0,0,0,0,0,0},{0,0,0,0,0,0,0}},{{0,0,0,0,0,0,0},{0,0,0,0,0,0,0},}
};




FRAME_TYPE Preamb[2] = {0x5555,0x5555};

const char IdlePacket_string[28] = "0111111110000000000111111111";
FRAME_TYPE IdlePacket[7] = {0,0,0,0,0,0,0};

const char ResetPacket_string[28] = "0000000000000000000000000001";
FRAME_TYPE ResetPacket[8] = {0,0,0,0,0,0,0,0};



#endif


